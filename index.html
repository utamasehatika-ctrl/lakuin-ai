<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lakuin AI Studio (Demo)</title>

<style>
body{
  margin:0;
  font-family:Arial,Helvetica,sans-serif;
  background:#0b2a27;
  color:#eafffb;
}
.container{
  max-width:420px;
  margin:auto;
  padding:16px;
}
.card{
  background:#0f3a35;
  padding:16px;
  border-radius:16px;
  margin-bottom:16px;
}
.upload{
  border:2px dashed #3de3c9;
  padding:20px;
  border-radius:14px;
  text-align:center;
  cursor:pointer;
}
.upload input{display:none}
select,button{
  width:100%;
  padding:12px;
  margin-top:10px;
  border-radius:12px;
  border:none;
}
button{
  background:#2bdac0;
  font-weight:bold;
}
img{
  width:100%;
  border-radius:14px;
  margin-top:10px;
}
.badge{
  background:#ffc107;
  color:#000;
  padding:6px 10px;
  border-radius:10px;
  display:inline-block;
  margin-bottom:10px;
}
</style>
</head>

<body>
<div class="container">

<h2>✨ Lakuin AI Studio (Demo)</h2>

<div class="card">
  <label class="upload">
    Upload Foto Produk
    <input type="file" id="upload" accept="image/*">
  </label>

  <select id="gender">
    <option>Wanita</option>
    <option>Pria</option>
    <option>Anak</option>
  </select>

  <select id="scene">
    <option>Kamar</option>
    <option>Kafe</option>
    <option>Studio</option>
  </select>

  <button onclick="generate()">✨ GENERATE (DEMO)</button>
</div>

<div class="card" id="resultBox" style="display:none">
  <span class="badge">MODE DEMO AKTIF</span>
  <img id="resultImg">
</div>

</div>

<script>
let imageData = "";

// ambil gambar
document.getElementById("upload").addEventListener("change", e => {
  const reader = new FileReader();
  reader.onload = ev => imageData = ev.target.result;
  reader.readAsDataURL(e.target.files[0]);
});

// generate
async function generate(){
  if(!imageData){
    alert("Upload foto dulu");
    return;
  }

  document.querySelector(".badge").innerText = "PROCESSING...";

  try{
    const res = await fetch("/api/generate", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        image: imageData,
        gender: document.getElementById("gender").value,
        scene: document.getElementById("scene").value
      })
    });

    const data = await res.json();

    document.getElementById("resultImg").src = data.result;
    document.getElementById("resultBox").style.display = "block";
    document.querySelector(".badge").innerText = "SELESAI";

  }catch(err){
    alert("Gagal generate");
    document.querySelector(".badge").innerText = "MODE DEMO AKTIF";
  }
}
</script>

</body>
</html>
